{#扩展 base.njk#}
{% extends 'base.njk' %}
{% block header %}

{% endblock %}

{% block content %}
    <div class="container" style="margin-top: 100px;">
        <div class="form row">
            <form class="form-horizontal col-sm-offset-4 col-md-offset-4" id="register_form">
                <h3 class="form-title">帐号注册</h3>
                <div class="col-sm-6 col-md-6">
                    <div class="form-group">
                        <input class="form-control required" type="text" placeholder="Username" name="username"
                               autofocus="autofocus"/>
                    </div>
                    <div class="form-group">
                        <input class="form-control required" type="password" placeholder="Password"
                               id="register_password" name="password"/>
                    </div>
                    <div class="form-group">
                        <input class="form-control required" type="password" placeholder="Re-type Your Password"
                               name="rpassword"/>
                    </div>
                    <div class="form-group">
                        <a class="btn btn-success pull-right" id="signup">确定</a>
                        <a class="btn btn-info pull-left" href="../">返回</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
        $(function () {
            $('#signup').on('click', function () {
                var username = $('input[name="username"]').val();
                var password = $('input[name="password"]').val();
                var rpassword = $('input[name="rpassword"]').val();
                var registerData = {username: username, password: password, retypePWD: rpassword};
                $.ajax({
                    cache: false,
                    type: 'POST',
                    url: '/signup',
                    data: registerData,
                    success: function (msg) {
                        alert(msg);
                        if (msg == '注册成功') {
                            window.location.href = '../';
                        }
                    }
                });
            })
        })
    </script>
{% endblock %}